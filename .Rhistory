library(readr)
library(tidyr)
library(dplyr)
library(here)
patient_ID <- c(1,2)
test_result_month1 <- c("a1" ,"a2")
test_result_month2 <- c("b1" ,"b2")
test_result_month3 <- c("c1" ,"c2")
view(patient_ID)
table(patient_ID)
patient_tests <- data.frame(patient_ID,test_result_month1,test_result_month2,test_result_month3)
table(patient_tests)
patient_tests
tidy_patient_tests <- patient_tests %>%
pivot_longer(
c('test_result_month1','test_result_month2','test_result_month3'),
names_to= 'month',
values_to='test_result'
)
tidy_patient_tests
tidy_patient_tests <- patient_tests %>%
pivot_longer(
c('test_result_month1','test_result_month2','test_result_month3'),
names_to= 'month',
names_prefix = 'test_result_month',
names_transform = list(month = as.integer),
values_to='test_result'
)
tidy_patient_tests
fev_data <- read_csv(fev.csv)
fev_data <- read_csv("fev.csv")
spec()
spec("fev.csv")
spec(fev_data)
fev_data$fev[32]
fev_data[32,3]
fev_data[32,"age"]
fev_data[32,1:3]
fev_data[32,-5]
fev_data[32,-1:-2]
fev_data[32,c(1,3,5)]
c(1,3,5) %>%
length
mutate(fev_data,fev_data$seqnbr, fev_data$age,fev_data$height)
knitr::opts_chunk$set(echo = TRUE)
table(is_tall)
is_tall <- fev_data$height > 72
table(is_tall)
fev_data[is_tall,]
View(fev_data[is_tall])
View_table(fev_data[is_tall])
# Add your code here!
fev_data[is_tall]
fev_data[is_tall,]
library(tidyverse)
hip_data <- read_csv("Hip Replacement CCG 1819.csv")
knitr::opts_chunk$set(echo = TRUE)
glimpse(hip_data)
age_EQ5D <- hip_data %>%
select(`Age Band`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(Age  = `Age Band`,
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(age_EQ5D)
age_EQ5D$Age %>% unique()
age_EQ5D$Age %>% table()
age_EQ5D %>% summary()
age_EQ5D_noNA <- age_EQ5D %>%
drop_na() %>%
filter(Age !='*')
table(age_EQ5D_noNA$Age)
summary(age_EQ5D_noNA)
head(age_EQ5D_noNA)
tidy_age_EQ5D_noNA <- age_EQ5D_noNA %>%
pivot_longer(c(EQ5D_Pre,EQ5D_Post),
names_to = 'Time',   # the name of the column to create from the data stored in the original column names
names_prefix = 'EQ5D_',  # remove this text from the start of each variable name
values_to = 'EQ5D' # the name of the column to create from the data stored in cell values
)
head(tidy_age_EQ5D_noNA)
tidy_age_EQ5D_noNA$Time <- factor(tidy_age_EQ5D_noNA$Time,levels=c('Pre','Post'))
tidy_age_EQ5D_noNA %>%
ggplot() +
geom_boxplot(aes(x = Time, y = EQ5D, colour = Age))
gender_EQ5D <- hip_data %>%
select(`Gender`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(gender_EQ5D)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- age_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D <- hip_data %>%
select(`Gender`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(Gender = `Gender`,
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(gender_EQ5D)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D_noNA <- age_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
rlang::last_trace()
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- age_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
gender_EQ5D <- hip_data %>%
select(`Gender`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(gender_EQ5D)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
summary(gender_EQ5D_noNA)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D$Gender[gender_EQ5D$Gender == 1] <- 'Male' #change 1 to Male
gender_EQ5D$Gender[gender_EQ5D$Gender == 2] <- 'Female' #change 2 to Female
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
summary(gender_EQ5D_noNA)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D$Gender[gender_EQ5D$Gender == `1`] <- `Male` #change 1 to Male
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D$Gender[gender_EQ5D$Gender == `1`] <- 'Male' #change 1 to Male
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D <- gender_EQ5D %>%
mutate(Gender = recode(Gender,
`1` = "Male",
`2` = "Female")) #change 1 to Male, 2 to Female
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
summary(gender_EQ5D_noNA)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
mutate(Gender = recode(Gender,
`1` = "Male",
`2` = "Female")) #change 1 to Male, 2 to Female
table(gender_EQ5D_noNA$Gender)
summary(gender_EQ5D_noNA)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
summary(gender_EQ5D_noNA)
head(tidy_gender_EQ5D_noNA)
head(gender_EQ5D_noNA)
tidy_gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
pivot_longer(c(EQ5D_Pre,EQ5D_Post),
names_to = 'Time',   # the name of the column to create from the data stored in the original column names
names_prefix = 'EQ5D_',  # remove this text from the start of each variable name
values_to = 'EQ5D' # the name of the column to create from the data stored in cell values
)
head(tidy_gender_EQ5D_noNA)
tidy_gender_EQ5D_noNA$Time <- factor(tidy_age_EQ5D_noNA$Time,levels=c('Pre','Post'))
# ggplot creates a blank canvas, to which we add a boxplot with "geom_boxplot"
tidy_age_EQ5D_noNA %>%
ggplot() +
geom_boxplot(aes(x = Time, y = EQ5D, colour = Gender))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
hip_data <- read_csv("Hip Replacement CCG 1819.csv")
glimpse(hip_data)
gender_EQ5D <- hip_data %>%
select(`Gender`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(gender_EQ5D)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
mutate(Gender = recode(Gender,
`1` = "Male",
`2` = "Female"))
summary(gender_EQ5D_noNA)
head(gender_EQ5D_noNA)
tidy_gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
pivot_longer(c(EQ5D_Pre,EQ5D_Post),
names_to = 'Time',   # the name of the column to create from the data stored in the original column names
names_prefix = 'EQ5D_',  # remove this text from the start of each variable name
values_to = 'EQ5D' # the name of the column to create from the data stored in cell values
)
head(tidy_gender_EQ5D_noNA)
tidy_gender_EQ5D_noNA %>%
ggplot() +
geom_boxplot(aes(x = Time, y = EQ5D, colour = Gender))
tidy_gender_EQ5D_noNA$Time <- factor(tidy_age_EQ5D_noNA$Time,levels=c('Pre','Post'))
# ggplot creates a blank canvas, to which we add a boxplot with "geom_boxplot"
tidy_gender_EQ5D_noNA %>%
ggplot() +
geom_boxplot(aes(x = Time, y = EQ5D, colour = Gender))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
hip_data <- read_csv("Hip Replacement CCG 1819.csv")
patient_stroke <- hip_data %>%
filter(Stroke = 1) %>%
summarise(count=count(patient_ID))
patient_stroke <- hip_data %>%
filter(Stroke = "1") %>%
summarise(count=count(patient_ID))
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(count=count(patient_ID))
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(count=n(patient_ID))
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n(patient_ID))
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n())
head(patient_stroke)
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n())
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n())
head(patient_stroke)
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n())
paste("Number of patients:", patient_stroke %>% pull(n))
knitr::opts_chunk$set(echo = TRUE)
glimpse(hip_data)
knitr::opts_chunk$set(echo = TRUE)
glimpse(hip_data)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
hip_data <- read_csv("Hip Replacement CCG 1819.csv")
library(tidyverse)
glimpse(hip_data)
activity <- hip_data %>%
select(`Provider Code`,`Pre-Op Q Activity`,`Post-Op Q Activity`) %>%
rename(
Activity_Pre = `Pre-Op Q Activity`,
Activity_Post = `Post-Op Q Activity`
)
head(acitvity)
activity <- hip_data %>%
+     select(`Provider Code`,`Pre-Op Q Activity`,`Post-Op Q Activity`) %>%
+     rename(
+         Activity_Pre = `Pre-Op Q Activity`,
activity <- hip_data %>%
select(`Provider Code`,`Pre-Op Q Activity`,`Post-Op Q Activity`) %>%
rename(
Activity_Pre = `Pre-Op Q Activity`,
Activity_Post = `Post-Op Q Activity`
)
head(activity)
activity <- hip_data %>%
select(`Pre-Op Q Activity`,`Post-Op Q Activity`) %>%
rename(
Activity_Pre = `Pre-Op Q Activity`,
Activity_Post = `Post-Op Q Activity`
)
head(activity)
activity %>% table()
activity %>% summary()
activity_noNA <- activity %>%
drop_na() %>%
filter(Activity_Pre != 9,
Activity_Post != 9)
activity_noNA %>% table()
summary(activity_noNA)
head(activity_noNA)
tidy_activity_noNA <- activity_noNA %>%
pivot_longer(c(Activity_Pre,Activity_Post),
names_to = 'Time',
names_prefix = 'Activity_',
values_to = 'Activity'
)
head(tidy_activity_noNA)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
hip_data <- read_csv("Hip Replacement CCG 1819.csv")
glimpse(hip_data)
gender_EQ5D <- hip_data %>%
select(`Gender`,`Pre-Op Q EQ5D Index`,`Post-Op Q EQ5D Index`) %>%
rename(
EQ5D_Pre = `Pre-Op Q EQ5D Index`,
EQ5D_Post = `Post-Op Q EQ5D Index`
)
head(gender_EQ5D)
gender_EQ5D$Gender %>% unique()
gender_EQ5D$Gender %>% table()
gender_EQ5D %>% summary()
gender_EQ5D_noNA <- gender_EQ5D %>%
drop_na() %>%
filter(Gender !='*')
table(gender_EQ5D_noNA$Gender)
gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
mutate(Gender = recode(Gender,
`1` = "Male",
`2` = "Female"))
summary(gender_EQ5D_noNA)
head(gender_EQ5D_noNA)
tidy_gender_EQ5D_noNA <- gender_EQ5D_noNA %>%
pivot_longer(c(EQ5D_Pre,EQ5D_Post),
names_to = 'Time',   # the name of the column to create from the data stored in the original column names
names_prefix = 'EQ5D_',  # remove this text from the start of each variable name
values_to = 'EQ5D' # the name of the column to create from the data stored in cell values
)
head(tidy_gender_EQ5D_noNA)
# Turn Time into a "factor" so we can order the categories any way we want
# otherwise they are alphabetical and "Post" ends up before "Pre"
tidy_gender_EQ5D_noNA$Time <- factor(tidy_age_EQ5D_noNA$Time,levels=c('Pre','Post'))
# ggplot creates a blank canvas, to which we add a boxplot with "geom_boxplot"
tidy_gender_EQ5D_noNA %>%
ggplot() +
geom_boxplot(aes(x = Time, y = EQ5D, colour = Gender))
patient_stroke <- hip_data %>%
filter(Stroke == "1") %>%
summarise(n=n())
paste("Number of patients:", patient_stroke %>% pull(n))
activity <- hip_data %>%
select(`Pre-Op Q Activity`,`Post-Op Q Activity`) %>%
rename(
Activity_Pre = `Pre-Op Q Activity`,
Activity_Post = `Post-Op Q Activity`
)
head(activity)
activity %>% table()
activity %>% summary()
activity_noNA <- activity %>%
drop_na() %>%
filter(Activity_Pre != 9,
Activity_Post != 9)
activity_noNA %>% table()
summary(activity_noNA)
head(activity_noNA)
tidy_activity_noNA <- activity_noNA %>%
pivot_longer(c(Activity_Pre,Activity_Post),
names_to = 'Time',
names_prefix = 'Activity_',
values_to = 'Activity'
)
head(tidy_activity_noNA)
